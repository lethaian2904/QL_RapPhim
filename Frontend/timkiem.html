<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieCyber</title>

    <!-- ANIMATE CSS  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- FONT AWESOME  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="giá-trị-integrity-mới-chính-xác" crossorigin="anonymous">


    <!-- BOOTSTRAP 4  CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- FONT GOOGLE  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,700;1,300&family=Roboto+Condensed:wght@300;400;700&family=Roboto:wght@700&family=Work+Sans:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- VENOBOX CSS  -->
    <link rel="stylesheet" href="./css/venobox.min.css">

    <!-- MAIN CSS  -->
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <!-- HEADER  -->
    <header class="container-md" style="width: 80%;">
        <p class="text-right text-white mb-0">
            <i class="fa-solid fa-phone"></i>
            <span class="mx-3 border-right pr-2">012.345.6789</span>
            <i class="fa fa-search"></i>
        </p>
        <nav class="navbar navbar-expand-md">
            <a class="navbar-brand" href="#"
                style="color: #fff; font-size: 50px; letter-spacing: 5px; margin-left: 50px;">
                CIW
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#movieNavBar"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon">
                    <i class="fa fa-bars"></i>
                </span>
            </button>

            <div class="collapse navbar-collapse" id="movieNavBar">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active line">
                        <a class="nav-link" href="#">TRANG CHỦ <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">RẠP PHIM</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">LỊCH CHIẾU</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">ƯU ĐÃI</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">THÀNH VIÊN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <header id="headerFixed">
        <nav class="navbar navbar-expand-lg container">
            <a class="navbar-brand" href="#"
                style="color: #fff; font-size: 50px; letter-spacing: 5px; margin-left: 150px;">
                CIW
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#movieNavBar"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon">
                </span>
            </button>

            <div class="collapse navbar-collapse" id="movieNavBar">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active line">
                        <a class="nav-link" href="#">TRANG CHỦ <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">RẠP PHIM</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">LỊCH CHIẾU</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">ƯU ĐÃI</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">THÀNH VIÊN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- CAROUSEL  -->
    <section class="movieCarousel">
        <!-- data-ride="carousel" -->
        <div id="carouselMovie" class="carousel slide">
            <ol class="container carousel-indicators">
                <li data-target="#carouselMovie" data-slide-to="0" class="active"></li>
                <li data-target="#carouselMovie" data-slide-to="1"></li>
                <li data-target="#carouselMovie" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="./img/hero-1.jpg" alt="First slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part I</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./img/hero-2.jpg" alt="Second slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part II</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores
                                quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./img/hero-3.jpg" alt="Third slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part III</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores
                                quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SEARCH -->
    <section id="search">
        <div class="find">
            <form>
                <div class="form-group form-row">
                    <div class="col-8 col-sm-8 col-md-8 col-lg-6 col-xl-6">
                        <input type="email" class="form-control" id="staticEmail2" placeholder="Tìm kiếm ...">
                    </div>
                    <div class="col-4 col-sm-4 col-md-4 col-lg-2 col-xl-2">
                        <button type="submit" class="btn">SUBMIT</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="list">
            <div class="picture">
                <img src="https://th.bing.com/th/id/OIP.Yl6pOMrA_2icev-bgbMySwHaK-?rs=1&pid=ImgDetMain"
                    alt="mô tả nội dung của ảnh">
            </div>
            <div class="">
                <h3>Bố già</h3>
                <p style="font-size: 18px;">13h00</p>
            </div>
            <div class="detail">
                <div class="menu">
                    <div class="label">
                        <label for="totalAmount" style="margin-right: 14px;">Tổng</label>
                        <input type="text" id="totalAmount" style="width: 155px; height: 30px; border-radius: 0; border: 0.5px solid black;" readonly>
                        <p style="display: inline; margin-left: 8%;">vnd</p>
                    </div>
                    
                    <div class="label">
                        <label for="" style="margin-right: 70px;">Số lượng Bắp</label>
                        <input type="number" id="popcornQuantity" min="0" value="0" onchange="updateTotal()">
                        <div style="display: inline;"></div>
                    </div>
                    
                    <div class="label">
                        <label for="" style="margin-right: 60px;">Số lượng Nước</label>
                        <input type="number" id="drinkQuantity" min="0" value="0" onchange="updateTotal()">
                        <div style="display: inline;"></div>
                    </div>
                    
                </div>
                <button class="datve" onclick="redirectToOrderPage()">Đặt vé</button>
            </div>



            
        </div>
    </section>






    <!-- FOOTER  -->
    <footer>
        <div class="container">
            <div class="row section">
                <div class="col-3">
                    <h3>GET IN TOUCH</h3>
                    <ul>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Give us feedback</a></li>
                        <li><a href="#">Contact us</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>ABOUT MOVIE STAR</h3>
                    <ul>
                        <li><a href="#">About us</a></li>
                        <li><a href="#">Find us</a></li>
                        <li><a href="#">Schedule</a></li>
                        <li><a href="#">News</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>LEGAL STUFF</h3>
                    <ul>
                        <li><a href="#">Terms & Conditions</a></li>
                        <li><a href="#">Privacy policy</a></li>
                        <li><a href="#">Cookie policy</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>CONNECT WITH US</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter/a></li>
                        <li><a href="#"><i class="fab fa-google-plus-g"></i> Google +</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer__copyright">
                <p>2020 © Movie Cyber / Cybersoft</p>
            </div>
        </div>
    </footer>

    <script>
        function redirectToOrderPage() {
        // Lấy tham số id từ URL
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');

        // Lấy giá trị số lượng từ input fields
        var popcornQuantity = parseInt(document.getElementById("popcornQuantity").value) || 0;
        var drinkQuantity = parseInt(document.getElementById("drinkQuantity").value) || 0;

        // Thêm số lượng bắp nước và số lượng đồ uống vào URL
        urlParams.set('popcornQuantity', popcornQuantity);
        urlParams.set('drinkQuantity', drinkQuantity);

        // Xây dựng URL với các tham số
        var url = `order.html?id=${id}&${urlParams.toString()}`;

        // Chuyển hướng trang
        window.location.href = url;
    }
document.addEventListener('DOMContentLoaded', function () {
    var total;

    // Hàm để cập nhật tổng giá tiền
    function updateTotal() {
        var totalElement = document.getElementById("totalAmount");
        var xhr = new XMLHttpRequest();

        xhr.open("GET", "http://localhost:8080/api/ticket_types", true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // Xử lý dữ liệu nhận được
                var ticketTypes = JSON.parse(xhr.responseText);

                // Tìm giá vé và nước dựa trên name
                var priceBap = 0;
                var priceNuoc = 0;

                for (var i = 0; i < ticketTypes.length; i++) {
                    if (ticketTypes[i].name === "bap") {
                        priceBap = ticketTypes[i].price;
                    } else if (ticketTypes[i].name === "nuoc") {
                        priceNuoc = ticketTypes[i].price;
                    }
                }

                // Lấy giá trị số lượng từ input fields
                var quantityBap = parseInt(document.getElementById("popcornQuantity").value) || 0;
                var quantityNuoc = parseInt(document.getElementById("drinkQuantity").value) || 0;

                // Tính tổng giá tiền
                total = priceBap * quantityBap + priceNuoc * quantityNuoc;

                // Hiển thị kết quả
                if (totalElement) {
                    totalElement.value = total.toLocaleString();
                }
            }
        };

        // Gửi yêu cầu GET đến API
        xhr.send();
    }

    // Bắt sự kiện thay đổi giá trị trong các ô input
    var popcornQuantityInput = document.getElementById("popcornQuantity");
    var drinkQuantityInput = document.getElementById("drinkQuantity");

    if (popcornQuantityInput && drinkQuantityInput) {
        popcornQuantityInput.addEventListener("input", updateTotal);
        drinkQuantityInput.addEventListener("input", updateTotal);
    }

    // Gọi hàm updateTotal để hiển thị kết quả ban đầu
    updateTotal();

    // Bắt sự kiện click nút "Đặt vé"
    var orderButton = document.getElementById("orderButton");
    if (orderButton) {
        orderButton.addEventListener("click", redirectToOrderPage);
    }

    
});



// Bạn có thể đặt hàm updateTotal trong phạm vi toàn cục nếu cần thiết
// window.updateTotal = updateTotal;


    </script>

    <!-- Thư viện hỗ trợ  -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <!-- BOOTSTRAP 4 JS  -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <!-- VENOBOX JS-->
    <script src="./js/venobox.min.js"></script>
    

    <!-- MAIN JS  -->
    <script>

        window.onscroll = function () {
            // Code tạo hiệu ứng xuất hiện thanh màu đen khi scroll
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                // 
                document.getElementById("headerFixed").style.transform = "translate(-50%,0)";
            }
            else {
                document.getElementById("headerFixed").style.transform = "translate(-50%,-100%)";
            }
        }
    </script>


</body>

</html>