<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieCyber</title>

    <!-- ANIMATE CSS  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- FONT AWESOME  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- BOOTSTRAP 4  CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- FONT GOOGLE  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,700;1,300&family=Roboto+Condensed:wght@300;400;700&family=Roboto:wght@700&family=Work+Sans:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- VENOBOX CSS  -->
    <link rel="stylesheet" href="./css/venobox.min.css">

    <style>

        

        .containers {

            text-align: center;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(15px);
        }

        h1 {
            color: #3498db;
        }

        .controls {
            margin-bottom: 20px;
            margin-top: 150px;

        }

        .controls label {
            display: block;
            margin-bottom: 10px;
            color: #ecf0f1;
        }

        

        .seat-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        

      
        body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #2c3e50;
    color: white;
    text-align: center;
    padding: 20px;
}

#seats {
    margin-top: 20px;
}

.seat-row {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.seat {
    width: 30px;
    height: 30px;
    background-color: #bdc3c7;
    border: 1px solid #ccc;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    user-select: none;
}

.occupied {
    background-color: #ccc;
}

.selected {
    background-color: #3498db;
}

#seatInput {
    padding: 8px;
    margin-top: 10px;
}

button {
    margin-top: 10px;
    padding: 10px;
    background-color: #3498db;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}

button:hover {
    background-color: #2980b9;
}




        
    </style>

    <!-- MAIN CSS  -->
    <link rel="stylesheet" href="./css/index.css">


</head>

<body>
    <!-- HEADER  -->
    <header class="container-md" style="width: 80%;">
        <p class="text-right text-white mb-0">
            <i class="fa-solid fa-phone"></i>
            <span class="mx-3 border-right pr-2">012.345.6789</span>
            <i class="fa fa-search"></i>
        </p>
        <nav class="navbar navbar-expand-md">
            <a class="navbar-brand" href="#"
                style="color: #fff; font-size: 50px; letter-spacing: 5px; margin-left: 50px;">
                CIW
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#movieNavBar"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon">
                    <i class="fa fa-bars"></i>
                </span>
            </button>

            <div class="collapse navbar-collapse" id="movieNavBar">
                <ul class="navbar-nav ml-auto" style="">
                    <li class="nav-item active line">
                        <a class="nav-link" href="#">TRANG CHỦ</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">RẠP PHIM </a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">LỊCH CHIẾU</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">ƯU ĐÃI</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">THÀNH VIÊN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <header id="headerFixed">
        <nav class="navbar navbar-expand-lg container">
            <a class="navbar-brand" href="#"
                style="color: #fff; font-size: 50px; letter-spacing: 5px; margin-left: 150px;">
                CIW
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#movieNavBar"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon">
                </span>
            </button>

            <div class="collapse navbar-collapse" id="movieNavBar">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active line">
                        <a class="nav-link" href="#">TRANG CHỦ <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">RẠP PHIM</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">LỊCH CHIẾU</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">ƯU ĐÃI</a>
                    </li>
                    <li class="nav-item line">
                        <a class="nav-link" href="#">THÀNH VIÊN</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- CAROUSEL  -->
    <section class="movieCarousel">
        <!-- data-ride="carousel" -->
        <div id="carouselMovie" class="carousel slide">
            <ol class="container carousel-indicators">
                <li data-target="#carouselMovie" data-slide-to="0" class="active"></li>
                <li data-target="#carouselMovie" data-slide-to="1"></li>
                <li data-target="#carouselMovie" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="./img/hero-1.jpg" alt="First slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part I</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./img/hero-2.jpg" alt="Second slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part II</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores
                                quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./img/hero-3.jpg" alt="Third slide">
                    <div class="movieCarousel__overlay">
                    </div>
                    <div class="container carousel-caption d-none d-md-block">
                        <div class="col-9">
                            <p class="animate__animated animate__fadeInDown">ACTION, ADVENTURE, FANTASY</p>
                            <h2 class="animate__animated animate__fadeInDown">End of the World: Part III</h2>
                            <p class="animate__animated animate__fadeInUp">Lorem ipsum dolor sit amet consectetur
                                adipisicing elit. Alias voluptas tempora esse
                                maiores
                                quasi eius, laudantium ratione earum dicta corrupti.</p>
                            <div class="movieCarousel__trailer animate__animated animate__fadeInUp">
                                <span>PG</span>
                                <button>
                                    <span>
                                        <i class="fa fa-play"></i>
                                        PLAY TRAILER
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="containers">
        <h1 style="color: white;">Chọn ghế xem phim</h1>


        <div id="seats" class="seat-container"></div>
        <p id="total-price" class="mess">Tổng giá: $0</p>
        <label for="seatInput">Enter seat number:</label>
        <input type="text" id="seatInput" placeholder="Enter seat number">

        <!-- Add a button to display selected seats -->
        <button id="showSelectedSeats">Show Selected Seats</button>

        <!-- Add a button to book seats -->
        <button id="bookSeats">Book Seats</button>
    </div>

    

    <!-- FOOTER  -->
    <footer>
        <div class="container">
            <div class="row section">
                <div class="col-3">
                    <h3>GET IN TOUCH</h3>
                    <ul>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Give us feedback</a></li>
                        <li><a href="#">Contact us</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>ABOUT MOVIE STAR</h3>
                    <ul>
                        <li><a href="#">About us</a></li>
                        <li><a href="#">Find us</a></li>
                        <li><a href="#">Schedule</a></li>
                        <li><a href="#">News</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>LEGAL STUFF</h3>
                    <ul>
                        <li><a href="#">Terms & Conditions</a></li>
                        <li><a href="#">Privacy policy</a></li>
                        <li><a href="#">Cookie policy</a></li>
                    </ul>
                </div>
                <div class="col-3">
                    <h3>CONNECT WITH US</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter/a></li>
                        <li><a href="#"><i class="fab fa-google-plus-g"></i> Google +</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer__copyright">
                <p>2020 © Movie Cyber / Cybersoft</p>
            </div>
        </div>
    </footer>
    <div id="seats"></div>




<script>
   document.addEventListener("DOMContentLoaded", function () {
    const seatContainer = document.getElementById("seats");
    const seatInput = document.getElementById("seatInput");
    const selectedSeatsButton = document.getElementById("showSelectedSeats");
    const bookSeatsButton = document.getElementById("bookSeats");
    const selectedSeats = [];

    // Gọi API để lấy thông tin danh sách ghế
    fetch("http://localhost:8080/api/showtimes/1/available_seats")
        .then(response => response.json())
        .then(seatsData => {
            // Sắp xếp ghế theo số ghế
            seatsData.sort((a, b) => a.seatNumber - b.seatNumber);
            // Tạo ghế thành một hàng
            createSeats(seatsData);
        })
        .catch(error => console.error("Lỗi khi lấy dữ liệu ghế:", error));

    function createSeats(seatsData) {
        let currentRowNumber = null;
        let seatRow = null;

        seatsData.forEach(seatData => {
            if (seatData.rowNumber !== currentRowNumber) {
                // Nếu là ghế của hàng mới, tạo một hàng mới
                seatRow = document.createElement("div");
                seatRow.classList.add("seat-row");
                seatContainer.appendChild(seatRow);
                currentRowNumber = seatData.rowNumber;
            }

            const seat = document.createElement("div");
            seat.classList.add("seat");
            seat.dataset.seatNumber = seatData.seatNumber;

            if (!seatData.isAvailable) {
                seat.classList.add("occupied");
            } else {
                seat.addEventListener("click", function () {
                    console.log("Seat clicked");
                    seat.classList.toggle("selected");
                    updateSelectedSeats();
                });
            }

            seat.textContent = seatData.seatNumber;
            seatRow.appendChild(seat);
        });
    }



    function updateSelectedSeats() {
        selectedSeats.length = 0;
        const selectedSeatNumber = seatInput.value;
        selectedSeats.push({
            seat: selectedSeatNumber
        });
    }

    selectedSeatsButton.addEventListener("click", function () {
        console.log("Selected seats:", selectedSeats);
    });

    bookSeatsButton.addEventListener("click", function () {
    console.log("Book seats:", selectedSeats);

    // Thêm logic đặt vé của bạn ở đây

    // Lấy số ghế từ input
    const selectedSeatNumber = seatInput.value;

    // Lấy tham số id từ URL
    const urlParams = new URLSearchParams(window.location.search);
    // const id = urlParams.get('id');
    const id = 1;

    // Thêm số ghế vào URL
    urlParams.set('selectedSeats', selectedSeatNumber);

    // Tạo mới URL chỉ với tham số id và selectedSeats
    const newUrl = `/Frontend/timkiem.html?id=${id}&selectedSeats=${selectedSeatNumber}`;

    // Chuyển hướng đến trang /Frontend/timkiem.html với số ghế và id trong URL
    window.location.href = newUrl;
});


});
    fetch("http://localhost:8080/api/ticket_types")
    .then(response => response.json())
    .then(ticketTypesData => {
        // Tìm loại vé có name là "ve"
        const veTicket = ticketTypesData.find(ticketType => ticketType.name === "ve");

        if (veTicket) {
            // Lấy giá tiền
            const veTicketPrice = veTicket.price;

            // Hiển thị giá tiền trên thẻ có id là "total-price"
            const totalPriceElement = document.getElementById("total-price");
            if (totalPriceElement) {
                totalPriceElement.textContent = `Tổng giá: $${veTicketPrice}`;
            }
        } else {
            console.log("Không tìm thấy loại vé có name là 've'");
        }
    })
    .catch(error => console.error("Lỗi khi lấy dữ liệu loại vé:", error));
</script>
        


            
            

    <!-- Thư viện hỗ trợ  -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <!-- BOOTSTRAP 4 JS  -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <!-- VENOBOX JS-->
    <script src="./js/venobox.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.venobox').venobox();
        });
    </script>

    <!-- MAIN JS  -->
    <script>
        window.onscroll = function () {
            // Code tạo hiệu ứng xuất hiện thanh màu đen khi scroll
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                // 
                document.getElementById("headerFixed").style.transform = "translate(-50%,0)";
            }
            else {
                document.getElementById("headerFixed").style.transform = "translate(-50%,-100%)";
            }
        }
    </script>

</body>

</html>