<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông tin phim</title>

    <!-- ANIMATE CSS  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- FONT AWESOME  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- BOOTSTRAP 4  CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- FONT GOOGLE  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,700;1,300&family=Roboto+Condensed:wght@300;400;700&family=Roboto:wght@700&family=Work+Sans:wght@300;400;700&display=swap"
        rel="stylesheet">

    <!-- VENOBOX CSS  -->
    <link rel="stylesheet" href="./css/venobox.min.css">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="./css/movie-details.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-fm/DO7bC4SOvx5zF90RVAOX4Rgg+gZvO0Ti9v5F8s+FQ6lAyj0Q3ziVT7vaFm6dbbVfU/4JbYPQsNMEq8VEocw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<header class="container-md">
    <p class="text-right text-white mb-0">
        <i class="fa-solid fa-phone"></i>
        <span class="mx-3 border-right pr-2">012.345.6789</span>
    </p>
    <nav class="navbar navbar-expand-md">
        <a class="navbar-brand" href="#" style="color: #fff; font-size: 50px; letter-spacing: 5px; margin-left: 50px;">
            CIW
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#movieNavBar"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon">
                <i class="fa fa-bars"></i>
            </span>
        </button>

        <div class="collapse navbar-collapse" id="movieNavBar">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active line">
                    <a class="nav-link" href="#">TRANG CHỦ <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item line">
                    <a class="nav-link" href="#">RẠP PHIM</a>
                </li>
                <li class="nav-item line">
                    <a class="nav-link" href="#">LỊCH CHIẾU</a>
                </li>
                <li class="nav-item line">
                    <a class="nav-link" href="#">ƯU ĐÃI</a>
                </li>
                <li class="nav-item line">
                    <a class="nav-link" href="#">THÀNH VIÊN</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<body>
    <div class="movie-container">
        <!-- Thông tin bộ phim  -->
        <div class="movie-info">
            <img id="movie-image" alt="image_path">
            <div class="movie-card">
                <h2 id="movie-title">Avengers: Endgame</h2>
                <div class="movie-description">
                    <p><strong>Tên Phim:</strong> <span id="title"></span></p>
                    <p><strong>Đạo diễn:</strong> <span id="director"></span></p>
                    <p><strong>Năm sản xuất:</strong> <span id="release-year"></span></p>
                    <p><strong>Thể loại:</strong> <span id="genre"></span></p>
                    <p><strong>Mô tả:</strong> <span id="description"></span></p>
                    <button class="play-button">&#9654 Trailer</button>
                </div>
            </div>
        </div>
        <!-- Lịch chiếu bộ phim-->
        <div class="movie-schedule">
            <label for="">Ngày chiếu: </label>
            <select style="width: auto; font-size: 16px" name="Date" id="date">
                <option value="">26/04/2019</option>
                <option value="">27/04/2019</option>
            </select>

            <label for=""><br>Rạp chiếu: </label>
            <div class="showtime">
                <h3 onclick="toggleDropdown(this, 'dcine-dropdown')">Dcine</h3>
                <div id="dcine-dropdown" class="dropdown">
                    <div onclick="selectTime(this)">10:00 AM</div>
                    <div onclick="selectTime(this)">1:30 PM</div>
                    <div onclick="selectTime(this)">4:45 PM</div>
                </div>
            </div>
            
            <div class="showtime">
                <h3 onclick="toggleDropdown(this, 'cgv-dropdown')">CGV</h3>
                <div id="cgv-dropdown" class="dropdown">
                    <div onclick="selectTime(this)">11:15 AM</div>
                    <div onclick="selectTime(this)">3:00 PM</div>
                    <div onclick="selectTime(this)">6:30 PM</div>
                </div>
            </div>
            
            <div class="showtime">
                <h3 onclick="toggleDropdown(this, 'starlight-dropdown')">StarLight</h3>
                <div id="starlight-dropdown" class="dropdown">
                    <div onclick="selectTime(this)">12:45 PM</div>
                    <div onclick="selectTime(this)">5:15 PM</div>
                    <div onclick="selectTime(this)">8:45 PM</div>
                </div>
            </div>
            

            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    var urlParams = new URLSearchParams(window.location.search);
                    var imageId = urlParams.get('id');
        
                    if (imageId) {
                        // Lấy thẻ img và cập nhật đường dẫn ảnh dựa trên giá trị của id
                        var movieImage = document.getElementById('movie-image');
                        switch (imageId) {
                            case '1':
                                // Thay đổi đường dẫn ảnh nếu imageId là 1
                                movieImage.src = '/Frontend/img/tải xuống.jpg';
                                break;
                            case '2':
                                // Thay đổi đường dẫn ảnh nếu imageId là 2
                                movieImage.src = '/Frontend/img/tải xuống (1).jpg';
                                break;
                            // Thêm các trường hợp khác nếu cần
                            default:
                                // Xử lý khi không có trường hợp nào trùng khớp
                                break;
                }
        
                        var apiUrl = 'http://localhost:8080/api/movie-details/' + imageId;
        
                        // fetch(apiUrl)
                        //     .then(response => response.json())
                        //     .then(movieDetails => {
                        //         // Xử lý thông tin chi tiết của bộ phim ở đây
                        //         console.log(movieDetails);
                        //         document.getElementById('movie-title').innerText = movieDetails.title;
                        //         // ...
                        //     })
                        //     .catch(error => {
                        //         console.error('Error fetching movie details:', error);
                        //     });
                    }
                });

                function toggleDropdown(element, dropdownId) {
                    var dropdown = document.getElementById(dropdownId);
                    if (dropdown.style.display === 'block') {
                        dropdown.style.display = 'none';
                    } else {
                        dropdown.style.display = 'block';
                    }
                }

                function selectTime(selectedTime) {
                    // Lấy giờ được chọn
                    var selectedHour = selectedTime.innerText;

                    // Chuyển hướng đến trang order.html với thời gian đã chọn
                    window.location.href = 'datve.html?selectedTime=' + encodeURIComponent(selectedHour);
                }
            </script>
            
        </div>


        <!-- Đánh giá bộ phim -->
        <div class="movie-comment">
            <h3>Đánh giá</h3>
            <input type="text" placeholder="Viết bình luận ...">
            <button>Gửi</button>
            <div class="show-comment">
                <ul>
                    <li><span>Người dùng: </span>Hoàng Văn A</li>
                </ul>
            </div>
        </div>
    </div>

</body>

</html>